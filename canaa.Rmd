---
title: "canna"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
runtime: shiny
---


```{r}
library(flexdashboard)
library(readxl)
library(ggplot2)
library(stringr)
library(plotly)
library(DT)
library(knitr)
library(shiny)
# library(shinyWidgets)
library(lubridate)
library(tidyverse)
library(janitor)
library(scales)
library(readr)
library(highcharter)
# library(googledrive)
library(googlesheets4)
```


```{r cars, include=FALSE}
dados<- read_delim("MICRODADOS_OCORRENCIAS.csv", 
    delim = ";", escape_double = FALSE, locale = locale(encoding = "latin1"), 
    trim_ws = TRUE)

dados <- dados %>%mutate(Hora = if_else(Hora == "Indeterminada","01:00:00", Hora))

dados <- dados  %>%  mutate(hora = str_sub(Hora, 1L,2L))

dados_react <- reactive( dados %>% filter(hora >= min (input$hora) &  hora < max (input$hora)+1 ,Municipio == input$cidade))

```

Column {.sidebar}
-----------------------------------------------------------------------


```{r}
sliderInput("hora","hora", min = 0, max = 23, value = c(00,23))

selectInput("cidade","cidade", choices = unique(dados$Municipio), selected = "SANTA TERESA")
```


Row
-----------------------------------------------------------------------
### dados

```{r}

renderDT(datatable(dados_react() %>% group_by( TipoIncidente) %>% count()))

```




